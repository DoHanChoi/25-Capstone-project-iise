# Reading Experience Platform - Product Requirements Document

**프로젝트명:** Reading Experience Platform (독서 여정 플랫폼)  
**버전:** 2.0 (MVP)  
**작성일:** 2025-10-22 (최종 수정)  
**목표:** 독서 과정을 음악으로 기록하고 공유하는 웹 서비스 개발

---

## 1. 서비스 핵심 컨셉

**"책을 읽는 여정이 곧 플레이리스트가 된다"**

사용자가 책을 읽어가는 과정의 각 단계마다 AI가 음악을 생성하여, 완독 시 독서 경험 전체를 담은 플레이리스트가 자동으로 완성됩니다.

### 독서 여정 플로우
```
Day 1: 책 선택 
  → v0 음악 자동 생성 (책 정보 기반)
  
Day 3: 독서 기록 추가 
  → v1 음악 생성 (인상 깊은 구절 + 감정)
  
Day 7: 독서 기록 추가 
  → v2 음악 생성 (누적 컨텍스트 반영)
  
Day 10: 완독 
  → vN 최종 음악 생성 (전체 회고)
  
━━━━━━━━━━━━━━━━━━━━
📀 독서 여정 플레이리스트 완성 (v0 → v1 → v2 → vN)
```

---

## 2. 타겟 사용자

### 페르소나 A: "여정을 기록하는 독서가" (Primary)
- 25-35세
- 독서를 즐기며 감상을 기록하는 습관
- 독서 과정의 감정 변화를 세밀하게 기록하고 싶음
- 창의적인 표현 방식에 관심

### 페르소나 B: "경험을 탐색하는 입문자" (Secondary)
- 20-30세
- 독서 입문자, 어떤 책을 읽을지 모름
- 긴 텍스트보다 감각적 콘텐츠 선호
- 다른 사람의 독서 경험에서 영감

---

## 3. MVP 핵심 기능 (P0 - 필수)

### 3.1 사용자 인증
- 이메일 회원가입/로그인
- 소셜 로그인 (Google, Kakao)
- 닉네임만 설정 (프로필 이미지, 소개글 제외)

### 3.2 도서 검색
- **Google Books API** 단일 사용
- 제목/저자 검색
- 책 정보 자동 로드 (표지, 설명, 카테고리 등)

### 3.3 독서 여정 관리

#### 여정 시작
- 책 선택 → "독서 시작하기"
- **v0 음악 자동 생성** (책 정보 기반)
- 여정 상태: "읽는 중"

#### 독서 중 기록 추가
- **기록 작성 폼:**
  - 인상 깊은 구절 (선택, 최대 500자)
  - 감정 태그 (다중 선택 + 직접 추가)
    - 추천 태그: 기쁨, 슬픔, 고독, 의지, 희망, 분노, 설렘, 평온
    - 사용자 커스텀 태그 추가 가능
  - 간단한 메모 (선택, 최대 500자)
  - 공개 여부 선택
  
- **vN 음악 생성**
  - 이전 기록들 참고 (누적 컨텍스트)
  - 새로운 감정 반영
  - 비동기 처리 (30초~2분)

#### 완독 처리
- **최종 감상 작성:**
  - 별점 (필수, 1~5점)
  - 한줄평 (필수, 최대 100자)
  - 감상평 (선택, 최대 2000자)
  - 감상평 공개 여부
  
- **최종 음악 생성 (vFinal)**
  - 전체 여정 종합 분석
  - 피날레 음악
  
- **플레이리스트 자동 생성**
  - v0 → v1 → ... → vN 시간순 정렬
  - 개별 재생 + 연속 재생

### 3.4 내 책장
- 독서 여정 목록
- 읽는 중 / 완독 탭 분리
- 각 여정 카드:
  - 책 표지, 제목, 저자
  - 상태, 독서 기간
  - 생성된 곡 수
  - 마지막 업데이트

### 3.5 게시판 (커뮤니티)

#### 피드
- 카드형 레이아웃
- 표시 정보:
  - 책 표지 (or 앨범커버)
  - 책 제목, 저자
  - 작성자 닉네임
  - 별점, 한줄평
  - 플레이리스트 정보 (곡 수, 총 시간)
  - 좋아요/댓글 수
- 필터: 카테고리 선택
- 정렬: 인기순 / 최신순

#### 게시물 상세
- 전체 내용 표시
- 플레이리스트 전체 재생
- 인상 깊은 구절들 (공개한 것만)
- 감상평 (공개한 경우)
- 좋아요, 댓글, 스크랩 기능
- **"이 책의 다른 여정 보기"** (같은 ISBN)

### 3.6 상호작용
- 좋아요 (1인 1좋아요)
- 댓글 (최대 500자)
- 스크랩 (북마크)

### 3.7 마이페이지
- 내 책장
- 보관함 (스크랩한 게시물)

---

## 4. 중요 기능 (P1 - MVP 포함 고려)

### 4.1 앨범커버 생성
- 완독 후 선택적 생성
- AI가 전체 여정 히스토리 기반 생성
- 옵션:
  - 단일 이미지 (포스터형)
  - 4컷 만화 (스토리형) - 권장
- 플레이리스트 썸네일로 사용

### 4.2 UI/UX
- 반응형 디자인 (모바일/태블릿/데스크톱)
- 다크모드 지원
- 눈 편의성 설정 (글씨 크기, 줄 간격)

---

## 5. 제외 기능 (Phase 2 이후)

- 추천 시스템
- 인기 랭킹
- 팔로우 시스템
- 알림 기능
- 독서 그룹/북클럽
- 통계 대시보드
- 음악 다운로드

---

## 6. 기술 스택

### Frontend
- **Next.js 15** (App Router)
- **Tailwind CSS v4** + **Shadcn/ui**
- **TypeScript**
- **React 19**

### Backend & Database
- **Supabase**
  - PostgreSQL (데이터베이스)
  - Auth (인증)
  - Storage (음악 파일, 앨범커버)
  - Realtime (좋아요, 댓글 실시간 업데이트)

### AI 연동
- **GPT-4o-mini** - 음악 프롬프트 생성
- **Mureka MCP** - 음악 생성 (3분 BGM)
- **DALL-E 3** or **Stable Diffusion** - 앨범커버 생성 (P1)

### 외부 API
- **Google Books API** - 도서 검색

### 배포
- **Vercel** - Frontend + API Routes

---

## 7. AI 생성 플로우

### 7.1 음악 생성 프로세스

#### v0 생성 (여정 시작)
```
입력: 책 정보 (제목, 설명, 카테고리)
↓
GPT-4o-mini: 음악 프롬프트 생성
{
  prompt: "solitary acoustic guitar with ocean waves...",
  genre: "folk",
  mood: "contemplative",
  tempo: 60,
  description: "고독하지만 의지가 담긴 첫 출발의 음악"
}
↓
Mureka MCP: 3분 BGM 생성
↓
Supabase Storage 저장
```

#### vN 생성 (독서 중)
```
입력: 
  - 책 정보
  - 이전 기록들 (v0 ~ vN-1)
  - 새로운 사용자 입력 (구절, 감정, 메모)
↓
GPT-4o-mini: 누적 컨텍스트 기반 프롬프트 생성
  "이전 음악과 연결되면서도 새로운 감정을 반영"
↓
Mureka MCP: 음악 생성
```

#### vFinal 생성 (완독)
```
입력:
  - 전체 여정 (v0 ~ vN-1 모든 기록)
  - 최종 감상 (별점, 한줄평, 감상평)
↓
GPT-4o-mini: 여정의 피날레 프롬프트 생성
  "전체 여정을 아우르는 종결감"
↓
Mureka MCP: 최종 음악 생성
```

### 7.2 앨범커버 생성 (P1)
```
입력: 전체 독서 여정 히스토리
↓
GPT-4o-mini: 핵심 장면 4개 추출
  [시작] [전환점] [클라이맥스] [완결]
  각 장면의 비주얼 프롬프트 생성
↓
DALL-E 3: 4개 이미지 생성
↓
이미지 합성: 4컷 만화 레이아웃
↓
Supabase Storage 저장
```

---

## 8. 비기능 요구사항

### 성능
- 페이지 로딩: 3초 이내
- 음악 생성: 2분 이내
- 100명 동시 접속 원활

### 보안
- 비밀번호 암호화
- API 인증 (Supabase RLS)
- HTTPS 통신
- 비공개 감상평 접근 제어

### 확장성
- Supabase 유료 플랜 전환 가능
- 음악 파일 스토리지 확장 가능

---

## 9. 제약 사항

### 기술적 제약
- 음악 생성 시간: 30초~2분
- Supabase 무료 플랜: 1GB 스토리지
- Vercel 무료 플랜: 100GB 대역폭/월

### 비용 제약
- MVP 초기 목표: 월 $20 이하
- GPT-4o-mini: ~$2 (월 1000곡 기준)

---

## 10. 핵심 사용자 시나리오

### 시나리오 1: 기록하는 독서가
```
1. 회원가입/로그인
2. 도서 검색: "노인과 바다"
3. [독서 시작하기] → v0 음악 생성
4. (Day 3) 기록 추가: "사람은 파멸할 수는..." + 감정[고독, 의지]
   → v1 음악 생성
5. (Day 7) 기록 추가 → v2 음악 생성
6. (Day 10) 완독: 별점 5, 한줄평, 감상평 작성
   → vN 최종 음악 생성
   → 플레이리스트 완성 (4곡, 12분)
7. (선택) 앨범커버 생성 (4컷 만화)
8. 게시판에 공유
```

### 시나리오 2: 탐색하는 입문자
```
1. 회원가입/로그인
2. 메인 피드 탐색
3. 카테고리 선택: [외국소설]
4. 게시물 클릭: "노인과 바다" 여정
5. 플레이리스트 전체 재생 (v0 → v1 → v2 → vN)
6. "이 책의 다른 여정 보기" 클릭
7. 좋아요, 댓글, 스크랩
8. 마이페이지 > 보관함에서 확인
```

---

## 참고 문서
- [ERD 설계](./ERD.md) - 데이터베이스 구조
- [실행 계획](./execution_plan.md) - 개발 단계별 계획

---

**이 문서는 Claude Code에서 개발할 때 참고하는 핵심 요구사항입니다.**